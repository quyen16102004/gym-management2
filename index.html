<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HỆ THỐNG QUẢN LÝ PHÒNG TẬP THỂ HÌNH</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>

<body>

    <header>
        <div class="header-content">
            <h1 class="logo">GYM PRO</h1>
            <nav id="nav-public">
                <a href="#" onclick="showPage('home')" class="nav-item active">TRANG CHỦ</a>
                <a href="#" onclick="showPage('login')" class="nav-item">ĐĂNG NHẬP</a>
                <a href="#" onclick="showPage('register')" class="nav-item btn btn-primary-outline">ĐĂNG KÝ</a>
                <div class="search-box">
                    <input type="text" placeholder="Tìm kiếm..." id="public-search-input">
                    <button><i class="fas fa-search"></i></button>
                </div>
            </nav>
            <nav id="nav-private" class="hidden">
                <a href="#" onclick="showPage('home')" class="nav-item active">TRANG CHỦ</a>
                <a href="#" onclick="showPage('member')" class="nav-item" data-role="admin,member">HỘI VIÊN</a>
                <a href="#" onclick="showPage('trainer')" class="nav-item" data-role="admin,trainer">HUẤN LUYỆN VIÊN</a>
                <a href="#" onclick="showPage('payment')" class="nav-item" data-role="admin,member">THANH TOÁN</a>
                <a href="#" onclick="showPage('manage-schedule')" class="nav-item" data-role="admin,trainer">QUẢN LÝ
                    LỊCH TẬP</a>
                <a href="#" onclick="showPage('package')" class="nav-item" data-role="admin,member">GÓI TẬP</a>
                <a href="#" onclick="showPage('feedback')" class="nav-item">PHẢN HỒI</a>
                <a href="#" onclick="showPage('account')" class="nav-item" data-role="admin">QUẢN LÝ TÀI KHOẢN</a>
                <div class="search-box">
                    <input type="text" placeholder="Tìm kiếm..." id="private-search-input">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <div class="logout-container">
                    <button class="btn btn-logout" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Đăng xuất
                    </button>
                </div>
                <div class="user-profile-dropdown">
                    <button class="btn-user-menu" onclick="toggleUserMenu()">
                        <i class="fas fa-user-circle"></i> <span id="current-username"></span> <i
                            class="fas fa-caret-down"></i>
                    </button>
                    <div class="user-menu-content hidden" id="user-menu">
                        <a href="#" onclick="showPage('account-settings')"><i class="fas fa-cog"></i> Cài đặt tài
                            khoản</a>
                        <a href="#" onclick="logout()" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Đăng
                            xuất</a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Home Page -->
        <section id="home" class="page">
            <div class="hero-section">
                <h2>NÂNG TẦM SỨC KHỎE CỦA BẠN CÙNG GYM PRO</h2>
                <p class="hero-text">QUẢN LÝ LỊCH TẬP, HỘI VIÊN, HUẤN LUYỆN VIÊN MỘT CÁCH CHUYÊN NGHIỆP</p>
                <button class="btn btn-primary btn-large" onclick="showPage('register')">ĐĂNG KÝ NGAY</button>
            </div>
            <div class="features mt-5">
                <div class="feature-box">
                    <i class="fas fa-calendar-alt"></i>
                    <h3>LỊCH TẬP THÔNG MINH</h3>
                    <p>Theo dõi và sắp xếp lịch tập dễ dàng, không bỏ lỡ buổi nào.</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-users"></i>
                    <h3>QUẢN LÝ HỘI VIÊN</h3>
                    <p>Quản lý thông tin hội viên chi tiết, tiện lợi.</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-dumbbell"></i>
                    <h3>HUẤN LUYỆN VIÊN CHUYÊN NGHIỆP</h3>
                    <p>Phân công và cập nhật huấn luyện viên, theo dõi hiệu suất.</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-dollar-sign"></i>
                    <h3>THANH TOÁN MINH BẠCH</h3>
                    <p>Theo dõi lịch sử thanh toán và quản lý gói tập.</p>
                </div>
            </div>
        </section>

        <!-- Member Page -->
        <section id="member" class="page hidden">
            <div class="page-header">
                <h2>THÔNG TIN HỘI VIÊN</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="showAddMemberModal()">
                        <i class="fas fa-user-plus"></i> Thêm mới
                    </button>
                    <button class="btn btn-secondary" onclick="showBulkImportModal('member')">
                        <i class="fas fa-file-import"></i> Import
                    </button>
                    <button class="btn btn-danger" onclick="showDeleteMultipleModal('member')">
                        <i class="fas fa-trash-alt"></i> Xóa nhiều
                    </button>
                </div>
            </div>

            <div class="member-profile-card" id="current-member-profile">
                <!-- Dữ liệu sẽ được JS render vào đây nếu là hội viên -->
                <div class="profile-placeholder">
                    <i class="fas fa-user-circle"></i>
                    <h3>Chưa có thông tin hội viên</h3>
                    <p>Vui lòng cập nhật hồ sơ của bạn hoặc liên hệ quản trị viên.</p>
                </div>
            </div>

            <h3 class="section-title mt-5">QUẢN LÝ HỘI VIÊN</h3>
            <div class="management-controls">
                <div class="search-filter">
                    <input type="text" id="member-search" placeholder="Tìm kiếm hội viên..." onkeyup="filterMembers()">
                    <select id="member-filter">
                        <option value="">Tất cả gói tập</option>
                        <option value="Premium">Premium</option>
                        <option value="Standard">Standard</option>
                        <option value="Basic">Basic</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="exportMembers()">
                    <i class="fas fa-file-export"></i> Xuất Excel
                </button>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Họ tên</th>
                            <th>Ngày sinh</th>
                            <th>Điện thoại</th>
                            <th>Email</th>
                            <th>Gói tập</th>
                            <th>PT</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody id="member-list">
                        <!-- Member data will be rendered here by JS -->
                    </tbody>
                </table>
            </div>

            <h3 class="section-title mt-5">LỊCH SỬ TẬP LUYỆN</h3>
            <div class="history-list" id="member-history-list">
                <div class="history-item">
                    <div class="history-date">15/07/2023</div>
                    <div class="history-desc">Buổi tập thể hình cơ bản với PT Trần Văn B</div>
                    <div class="history-status completed">
                        <i class="fas fa-check-circle"></i> Hoàn thành
                    </div>
                </div>
                <div class="history-item">
                    <div class="history-date">10/07/2023</div>
                    <div class="history-desc">Buổi tập cardio cường độ cao</div>
                    <div class="history-status completed">
                        <i class="fas fa-check-circle"></i> Hoàn thành
                    </div>
                </div>
                <div class="history-item">
                    <div class="history-date">05/07/2023</div>
                    <div class="history-desc">Buổi tập chân và bụng</div>
                    <div class="history-status pending">
                        <i class="fas fa-hourglass-half"></i> Sắp tới
                    </div>
                </div>
            </div>
        </section>

        <!-- Trainer Page -->
        <section id="trainer" class="page hidden">
            <div class="page-header">
                <h2>QUẢN LÝ HUẤN LUYỆN VIÊN</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="showAddTrainerModal()">
                        <i class="fas fa-user-plus"></i> Thêm mới
                    </button>
                    <button class="btn btn-secondary" onclick="showEditTrainerModal()">
                        <i class="fas fa-edit"></i> Sửa
                    </button>
                    <button class="btn btn-danger" onclick="confirmDeleteTrainer()">
                        <i class="fas fa-trash-alt"></i> Xóa
                    </button>
                </div>
            </div>

            <div class="trainer-list-grid" id="trainer-list">
                <!-- Trainer cards will be rendered here by JS -->
            </div>

            <h3 class="section-title mt-4">LỊCH LÀM VIỆC CỦA TÔI</h3>
            <div class="schedule-calendar-view">
                <div class="calendar-controls">
                    <button class="btn btn-secondary" onclick="prevWeek()"><i class="fas fa-chevron-left"></i></button>
                    <span id="current-week-range">Tuần này</span>
                    <button class="btn btn-secondary" onclick="nextWeek()"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="schedule-grid" id="trainer-weekly-schedule">
                    <!-- Weekly schedule will be rendered here by JS -->
                </div>
            </div>

            <h3 class="section-title mt-5">HỌC VIÊN CỦA TÔI</h3>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Họ tên</th>
                            <th>Điện thoại</th>
                            <th>Email</th>
                            <th>Gói tập</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody id="student-list">
                        <!-- Student data will be rendered here by JS -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Payment Page -->
        <section id="payment" class="page hidden">
            <h2 class="section-title">LỊCH SỬ THANH TOÁN</h2>
            <div class="payment-summary-card">
                <h3>Tổng chi tiêu: <span id="total-spent">5.800.000đ</span></h3>
                <button class="btn btn-primary"><i class="fas fa-plus-circle"></i> Thanh toán mới</button>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Ngày</th>
                            <th>Mô tả</th>
                            <th>Số tiền</th>
                            <th>Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody id="payment-history-list">
                        <tr>
                            <td>05/07/2023</td>
                            <td>Gói Premium 6 tháng</td>
                            <td>5.000.000đ</td>
                            <td class="status-paid"><i class="fas fa-check-circle"></i> Đã thanh toán</td>
                        </tr>
                        <tr>
                            <td>15/06/2023</td>
                            <td>Phí gia hạn</td>
                            <td>800.000đ</td>
                            <td class="status-paid"><i class="fas fa-check-circle"></i> Đã thanh toán</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Package Page -->
        <section id="package" class="page hidden">
            <h2 class="section-title">GÓI TẬP CỦA BẠN</h2>
            <div class="package-container-grid" id="user-package-display">
                <!-- User's current package will be displayed here -->
                <div class="package-card current-package">
                    <div class="package-header">
                        <h3>Gói Premium</h3>
                        <span class="package-price">5.000.000đ</span>
                    </div>
                    <div class="package-details">
                        <p><i class="fas fa-check-circle"></i> 36 buổi tập</p>
                        <p><i class="fas fa-check-circle"></i> Huấn luyện viên cá nhân</p>
                        <p><i class="fas fa-check-circle"></i> Đánh giá thể lực chuyên sâu</p>
                        <p><i class="fas fa-check-circle"></i> Hỗ trợ dinh dưỡng 24/7</p>
                    </div>
                    <div class="package-footer">
                        <span class="package-expiry">Hết hạn: 05/01/2024</span>
                        <button class="btn btn-primary">Gia hạn ngay</button>
                    </div>
                </div>
                <div class="progress-container">
                    <h4>Tiến độ sử dụng gói tập</h4>
                    <div class="progress-bar">
                        <div class="progress" style="width: 25%"></div>
                    </div>
                    <span class="progress-text">9/36 buổi đã sử dụng (25%)</span>
                </div>
            </div>

            <h3 class="section-title mt-5">QUẢN LÝ GÓI TẬP</h3>
            <div class="package-management">
                <div class="package-actions">
                    <button class="btn btn-primary" onclick="showAddPackageModal()">
                        <i class="fas fa-plus-circle"></i> Thêm gói mới
                    </button>
                    <button class="btn btn-secondary" onclick="showPromotionModal()">
                        <i class="fas fa-percentage"></i> Khuyến mãi
                    </button>
                </div>
                <div class="package-container-grid" id="available-packages">
                    <!-- Available packages will be rendered here by JS -->
                </div>
        </section>

        <!-- Feedback Page -->
        <section id="feedback" class="page hidden">
            <h2 class="section-title">GỬI PHẢN HỒI CỦA BẠN</h2>
            <form onsubmit="return sendFeedback(event)" class="modern-form">
                <div class="form-group">
                    <label for="feedback-subject">Chủ đề:</label>
                    <input type="text" id="feedback-subject" class="form-control"
                        placeholder="Ví dụ: Vấn đề về lịch tập" required>
                </div>
                <div class="form-group">
                    <label for="feedback-content">Nội dung phản hồi:</label>
                    <textarea id="feedback-content" class="form-control"
                        placeholder="Nhập nội dung phản hồi chi tiết..." rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Gửi phản hồi</button>
            </form>
            <div id="feedback-result" class="form-message"></div>
        </section>

        <!-- Review Page (New Feature) -->
        <section id="review" class="page hidden">
            <h2 class="section-title">ĐÁNH GIÁ HUẤN LUYỆN VIÊN HOẶC GÓI TẬP</h2>
            <form onsubmit="return sendReview(event)" class="modern-form">
                <div class="form-group">
                    <label for="review-type">Đối tượng đánh giá:</label>
                    <select id="review-type" class="form-control" required>
                        <option value="">-- Chọn đối tượng --</option>
                        <option value="pt">Huấn luyện viên</option>
                        <option value="package">Gói tập</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="review-target-name">Tên đối tượng (nếu có):</label>
                    <input type="text" id="review-target-name" class="form-control"
                        placeholder="Ví dụ: Trần Văn B (PT) hoặc Gói Premium">
                </div>
                <div class="form-group">
                    <label for="review-rating">Đánh giá sao:</label>
                    <div class="star-rating" id="review-rating">
                        <i class="far fa-star" data-value="1"></i>
                        <i class="far fa-star" data-value="2"></i>
                        <i class="far fa-star" data-value="3"></i>
                        <i class="far fa-star" data-value="4"></i>
                        <i class="far fa-star" data-value="5"></i>
                    </div>
                </div>
                <div class="form-group">
                    <label for="review-content">Nội dung đánh giá:</label>
                    <textarea id="review-content" class="form-control" placeholder="Nhập nội dung đánh giá của bạn..."
                        rows="5" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Gửi đánh giá</button>
            </form>
            <div id="review-result" class="form-message"></div>
        </section>

        <!-- Account Management Page (Admin Only) -->
        <section id="account" class="page hidden">
            <div class="page-header">
                <h2>QUẢN LÝ TÀI KHOẢN</h2>
                <button class="btn btn-primary" onclick="showAddAccountModal()">
                    <i class="fas fa-user-plus"></i> Thêm tài khoản mới
                </button>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Tên đăng nhập</th>
                            <th>Họ tên</th>
                            <th>Email</th>
                            <th>Quyền</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody id="account-list">
                        <!-- Account data will be rendered here by JS -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Login/Register Page -->
        <section id="login" class="page hidden auth-page">
            <div class="auth-tabs">
                <button class="tab-btn active" onclick="switchAuthTab('login-tab')">Đăng nhập</button>
                <button class="tab-btn" onclick="switchAuthTab('register-tab')">Đăng ký</button>
            </div>

            <div id="login-tab" class="auth-form">
                <h2 class="text-center mb-4">ĐĂNG NHẬP HỆ THỐNG</h2>
                <form onsubmit="return login(event)">
                    <div class="form-group">
                        <label for="login-username">Tài khoản</label>
                        <input type="text" id="login-username" class="form-control" placeholder="Nhập tài khoản"
                            required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Mật khẩu</label>
                        <input type="password" id="login-password" class="form-control" placeholder="Nhập mật khẩu"
                            required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ĐĂNG NHẬP</button>
                </form>
            </div>

            <div id="register-tab" class="auth-form hidden">
                <h2 class="text-center mb-4">ĐĂNG KÝ TÀI KHOẢN</h2>
                <form onsubmit="return register(event)">
                    <div class="form-group">
                        <label for="reg-username">Tên đăng nhập</label>
                        <input type="text" id="reg-username" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-fullname">Họ và tên</label>
                        <input type="text" id="reg-fullname" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-email">Email</label>
                        <input type="email" id="reg-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-phone">Số điện thoại</label>
                        <input type="tel" id="reg-phone" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-password">Mật khẩu</label>
                        <input type="password" id="reg-password" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-confirm">Nhập lại mật khẩu</label>
                        <input type="password" id="reg-confirm" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-role">Phân quyền</label>
                        <select class="form-control" id="reg-role" required>
                            <option value="">Chọn quyền</option>
                            <option value="member">Hội viên</option>
                            <option value="trainer">Huấn luyện viên</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ĐĂNG KÝ</button>
                </form>
            </div>
        </section>

        <!-- Manage Schedule Page -->
        <section id="manage-schedule" class="page hidden">
            <div class="page-header">
                <h2>QUẢN LÝ LỊCH TẬP</h2>
                <button class="btn btn-primary" onclick="showAddScheduleModal()">
                    <i class="fas fa-calendar-plus"></i> Thêm lịch tập
                </button>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Hội viên</th>
                            <th>Huấn luyện viên</th>
                            <th>Ngày</th>
                            <th>Giờ</th>
                            <th>Trạng thái</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody id="schedule-list">
                        <!-- Schedule data will be rendered here by JS -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Global Modal for Forms -->
        <div id="global-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close-button" onclick="hideModal()">&times;</span>
                <h3 id="modal-title"></h3>
                <div id="modal-body">
                    <!-- Forms will be loaded here dynamically -->
                </div>
            </div>
        </div>

    </main>

    <footer>
        <p>&copy; 202 GYM PRO - Hệ Thống Quản Lý Thể Hình Hiện Đại</p>
    </footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="script.js"></script>
</body>

</html>
